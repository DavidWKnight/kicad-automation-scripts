stages:
  - test
  - export

test-erc:
  image: productize/kicad-automation-scripts
  tags:
  - docker
  script:
    - ./eeschema/schematic.py run_erc ./test-projects/good-project/good-project.sch output
  stage: test
  artifacts:
    paths:
      - output
    expire_in: 1 day

export-schematic-pdf:
  image: productize/kicad-automation-scripts
  tags:
  - docker
  script:
    - ./eeschema/schematic.py export -a -f pdf ./test-projects/good-project/good-project.sch output
  stage: export
  artifacts:
    paths:
      - output
    expire_in: 1 day

test-drc:
  image: productize/kicad-automation-scripts
  tags:
  - docker
  script:
    - ./pcbnew_scripts/run_drc.py ./test-projects/good-project/good-project.kicad_pcb output
  stage: test

export-layout-svg:
  image: productize/kicad-automation-scripts
  tags:
  - docker
  script:
    - ./pcbnew_scripts/generate_svg.py ./test-projects/good-project/good-project.kicad_pcb
  stage: export
  artifacts:
    paths:
      - build
    expire_in: 1 day
